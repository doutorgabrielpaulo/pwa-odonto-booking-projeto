{% extends "layout.html" %}
{% block content %}
<div class="p-4 md:p-6 space-y-4">
    <div class="page-header-stacked">
        <h2 class="text-lg font-bold text-gray-800">Gerador de Mensagens para Pacientes ✨</h2>
        <div class="header-actions">
            <a href="{{ url_for('admin.dashboard') if current_user.is_admin else url_for('main.dashboard') }}" class="inline-block text-sm text-blue-600 hover:underline"><i class="fas fa-arrow-left mr-2"></i>Voltar</a>
        </div>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-md">
        <p class="text-sm text-gray-600 mb-4">Selecione um modelo e clique em "Gerar" para que a IA crie uma mensagem profissional para seu paciente.</p>
        
        <div class="space-y-1">
            <label for="template-select" class="text-xs font-semibold text-gray-500">Escolha o tipo de mensagem:</label>
            <select id="template-select" class="w-full p-2.5 bg-gray-100 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-600">
                <option value="lembrete">Lembrete de Consulta</option>
                <option value="pos_operatorio">Cuidados Pós-Operatórios</option>
                <option value="agradecimento">Agradecimento (Novo Paciente)</option>
            </select>
        </div>

        <button id="generate-btn" class="w-full p-2.5 mt-4 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition-colors text-sm">
            <i class="fas fa-magic mr-2"></i> Gerar Mensagem
        </button>

        <div id="loading-spinner" style="display: none; text-align: center; margin-top: 20px;">
            <i class="fas fa-spinner fa-spin fa-2x text-blue-600"></i>
            <p class="text-sm text-gray-500 mt-2">Gerando texto...</p>
        </div>

        <div id="result-container" style="display: none; margin-top: 20px;">
            <div class="space-y-1">
                <label for="generated-text" class="text-xs font-semibold text-gray-500">Mensagem Gerada:</label>
                <textarea id="generated-text" class="w-full p-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm" rows="8"></textarea>
            </div>
            <button id="copy-btn" class="mt-2 p-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 text-xs">
                <i class="fas fa-copy mr-2"></i> Copiar Texto
            </button>
            <span id="copy-feedback" style="margin-left: 10px; color: green; display: none;">Copiado!</span>
        </div>
    </div>
</div>
{% endblock %}
